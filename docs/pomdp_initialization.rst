.. _sec-initialization:

Initialization protocol
=======================

Instead of choosing initial locations for the agent and the source arbitrarily, OTTO implements the initialization
protocol proposed by [Loisy2022]_. This protocol eliminates any arbitrariness in the choice of initial conditions.

The agent is placed at the center of the domain,
and the search is initialized by a nonzero hit :math:`h_{\text{init}}` drawn randomly from
:math:`\text{Pr}(h_{\text{init}})`, the probability distribution of receiving :math:`h_{\text{init}}` hits in an
infinite domain with a uniform source distribution.
The set of initial source distributions :math:`p_0` is the set generated by each possible value of :math:`h_{\text{init}}`.

The procedure is

    1. place the agent at the center of the domain,
    2. draw a initial nonzero hit
    3. compute the corresponding :math:`p_0`,
    4. draw a source location from :math:`p_0`.

.. figure:: figs/illustration_initial_set_of_beliefs.png
  :width: 99 %
  :align: center

  A set of initial beliefs :math:`p_0` with the corresponding values of the initial hit
  and probabilities of occurring shown on top. "A" indicates the agent's position, at the center of the domain.

The advantages of this initialization are twofold:

    - The definition of the start is not arbitrary but instead corresponds to the moment when the agent is informed
      that there is source (as opposed to nothing) in the neighborhood and where tracking it down becomes meaningful.
    - The grid size (called ``N_GRID`` in the code) can be chosen large enough such that the domain boundaries play
      virtually no role in the search (this is because the source probability distribution after a hit decays
      exponentially with the distance to the agent). Mimicking an open world is highly desirable since the
      :ref:`model<sec-model>` used for hits assumes an infinite space and any finite-size effect in this context would be
      physically irrelevant.

Unless specified by the user, the size ``N_GRID`` of the computation domain is automatically set to a large enough value.

The full procedure is detailed in [Loisy2022]_.
